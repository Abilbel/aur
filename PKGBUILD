# Maintainer: Caleb Maclennan <caleb@alerque.com>
# PKGBUILD generated by pipman
# Python package author: Kolen Cheung <christian.kolen@gmail.com>

_pipname=pantable
pkgname=python-$_pipname
pkgver=0.12.2
pkgrel=2
pkgdesc="CSV Tables in Markdown: Pandoc Filter for CSV Tables"
arch=(any)
url="https://github.com/ickc/$_pipname"
license=(GPLv3)
makedepends=("python" "python-pip")
depends=("python-click"
         "python-future"
         "python-pandoc-include"
         "python-panflute"
         "python-yaml"
         "python-shutilwhich")

build() {
  pip install --no-deps --target="$_pipname" "$_pipname==$pkgver"
}

package() {
  sitepackages=$(python -c "import site; print(site.getsitepackages()[0])")
  mkdir -p "$pkgdir/$sitepackages"
  cp -r "$srcdir/$_pipname"/* "$pkgdir/$sitepackages"
  install -d "$pkgdir/usr/bin"
  ln -s {$(python -c "import site; print(site.getsitepackages()[0]+'/bin')"),$pkgdir/usr/bin}/pantable
  ln -s {$(python -c "import site; print(site.getsitepackages()[0]+'/bin')"),$pkgdir/usr/bin}/pantable2csv
}
